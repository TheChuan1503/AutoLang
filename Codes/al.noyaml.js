/**
 * AutoLang Lightweight i18n
 * VERSION 1.5.1
 * LICENSE MIT
 *
 * https://github.com/TheChuan1503/AutoLang
 */
const al={load(t=this.mode.HTML,e=(()=>{}),a){const l=(t,e)=>(e=e.trim().split(";").map((t=>t.trim())).filter((t=>t)),e.reduce(((t,e)=>{const[a,l]=e.split(":").map((t=>t.trim()));return t[a]=void 0!==l&&l,t}),{}));a=this.getUserLang(a);const s={...al.lang[a]};if(void 0!==al.lang.default){Object.keys(al.lang[al.lang.default]).forEach((t=>{s.hasOwnProperty(t)||(s[t]=al.lang[al.lang.default][t])}))}if(Object.keys(s).forEach((t=>{const e=s[t];s[t]=e.replace(/(?<!\\)((?:\\\\)*)\$\{([^}]*)}/g,((t,e,a)=>e+new Function('"use strict";return ('+a+")")())).replace(/(?<!\\)((?:\\\\)*)\{([^}]*)}/g,((t,e,a)=>e+s[a.trim()])).replace(/\$(?:\\\$*)(\{[^}]*})/g,((t,e,a)=>e+a))})),t==al.mode.REPLACE){const t=(t,e,a)=>{document.querySelectorAll(t).forEach((t=>{const l=new RegExp(e,"gi");al._setAttr(t,e,al._getAttr(t,e).replace(l,a))}))};return document.querySelectorAll("[al-aplto]").forEach((e=>{const a=e.getAttribute("al-aplto"),r=l(0,a);Object.keys(r).forEach((e=>{t(`[${e}]`,r[e],s[r[e]])}))})),Object.keys(s).forEach((e=>{t("[al]",e,s[e])})),void e()}document.querySelectorAll("[al-aplto]").forEach((t=>{const a=t.getAttribute("al-aplto");((t,a,l)=>{if(0!=l[Object.keys(l)[0]])Object.keys(l).forEach((e=>{al._setAttr(t,e,s[l[e]])})),e()})(t,0,l(0,a))})),Object.keys(s).forEach((e=>{document.querySelectorAll(`[al="${e}"]`).forEach((a=>{const r=a.getAttribute("al-aplto");if(r){const t=l(0,r);0==t[Object.keys(t)[0]]&&al._setAttr(a,Object.keys(t)[0],s[e])}else if("input"==a.tagName.toLowerCase())a.value=s[e];else if(t===al.mode.TEXT)a.innerText=s[e];else a.innerHTML=s[e]}))})),e()},setLangPropPath(t){this.langPropPath=t},current(t,e={},a,l=(()=>{})){this.lang.available=t;const s=this.getUserLang(a),r=this.lang.default;-1==t.indexOf(s)?this.setLangProp([r],l,e):this.setLangProp(r==s?[s]:[r,s],l,e)},setLangProp(t,e=(()=>{}),a={}){if(Array.isArray(t))1==a.url&&"string"==typeof t[0]?this._(t,0,(t=>{this.setLangProp(t,e,a)}),a.yaml):(t.forEach((t=>{this.lang[t.language]=t.data})),e(this.lang));else if("object"==typeof t)void 0===t.default&&(t.default=this.lang.default),this.lang=t,e(this.lang);else try{this.setLangProp(jsyaml.load(t),e,a)}catch{this.setLangProp(JSON.parse(t),e,a)}},setDefault(t){this.lang.default=t},setDefaultCountry(t){this.lang.default_country=t},getUserLang(t){if(t||(t=navigator.language),-1==this.lang.available.indexOf(t))if("default"==t)t=this.lang.default;else{const e=-1!=t.indexOf("-")?t.split("-")[0]:t;t=void 0!==this.lang.default_country&&this.lang.default_country.hasOwnProperty(e)?this.lang.default_country[e]:this.lang.default}return t},release(){this.lang={},this._p=[]},httpGet(t,e=(()=>{})){const a=new XMLHttpRequest;a.onreadystatechange=()=>{4==a.readyState&&e(a.responseText,a.status)},a.open("GET",t,!0),a.send()},_p:[],_(t,e=0,a,l){if(e>=t.length)return a(this._p),void(this._p=[]);this.httpGet(this.langPropPath.replace(/%%/g,t[e]),(s=>{this._p.push(1==l?jsyaml.load(s):JSON.parse(s)),this._(t,e+1,a,l)}))},_setAttr(t,e,a){t[e]=a,t.setAttribute(e,a)},_getAttr:(t,e)=>void 0!==t[e]?t[e]:t.getAttribute(e),langPropPath:"",ver:[18,"1.5.1"],mode:{HTML:0,TEXT:1,TEXT_ALL:2,REPLACE:3},lang:{default:"zh-CN"}};